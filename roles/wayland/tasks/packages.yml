---
# =============================================================================
# Wayland Packages Installation
# =============================================================================

- name: Install wayland packages
  ansible.builtin.command:
    cmd: "xbps-install -Sy {{ wayland_packages | join(' ') }}"
  changed_when: true

- name: Enable seatd service
  ansible.builtin.file:
    src: /etc/sv/seatd
    dest: /var/service/seatd
    state: link

- name: Add user to _seatd group
  ansible.builtin.user:
    name: "{{ username }}"
    groups: _seatd
    append: true

- name: Install clipboard manager (cliphist)
  ansible.builtin.command:
    cmd: xbps-install -Sy cliphist
  changed_when: true
  failed_when: false
