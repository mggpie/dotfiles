---
# =============================================================================
# Shell Packages Installation
# Tag: shell-packages
# =============================================================================

- name: Install shell packages
  ansible.builtin.command:
    cmd: xbps-install -Sy fish-shell bash bash-completion starship exa bat fd ripgrep fzf jq
  changed_when: true

- name: Set fish as default shell for user
  ansible.builtin.user:
    name: "{{ username }}"
    shell: /usr/bin/fish

- name: Create fish config directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/fish/functions"
    state: directory
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: '0755'

- name: Create fish conf.d directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/fish/conf.d"
    state: directory
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: '0755'
