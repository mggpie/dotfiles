---
# =============================================================================
# Dotfiles Role - Main
# =============================================================================
# Usage:
#   --tags dotfiles    # all symlinks
#   --tags mpv         # only mpv
#   --tags newsboat    # only newsboat
#   --tags zathura     # only zathura
#   --tags lf          # only lf
#   --tags qutebrowser # only qutebrowser
#   --tags micro       # only micro
# =============================================================================

- name: Ensure config directory exists
  ansible.builtin.file:
    path: "{{ user_home }}/.config"
    state: directory
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: '0755'
  tags: [dotfiles, mpv, newsboat, zathura, lf, qutebrowser, micro]

- name: Include mpv configuration
  ansible.builtin.import_tasks: mpv.yml
  tags: [dotfiles, mpv]

- name: Include newsboat configuration
  ansible.builtin.import_tasks: newsboat.yml
  tags: [dotfiles, newsboat]

- name: Include zathura configuration
  ansible.builtin.import_tasks: zathura.yml
  tags: [dotfiles, zathura]

- name: Include lf configuration
  ansible.builtin.import_tasks: lf.yml
  tags: [dotfiles, lf]

- name: Include qutebrowser configuration
  ansible.builtin.import_tasks: qutebrowser.yml
  tags: [dotfiles, qutebrowser]

- name: Include micro configuration
  ansible.builtin.import_tasks: micro.yml
  tags: [dotfiles, micro]

- name: Create local bin directory
  ansible.builtin.file:
    path: "{{ user_home }}/.local/bin"
    state: directory
    owner: "{{ username }}"
    group: "{{ username }}"
    mode: '0755'
  tags: [dotfiles]
