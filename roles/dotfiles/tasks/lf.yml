---
# =============================================================================
# LF File Manager Configuration (symlink)
# Tag: lf
# =============================================================================

- name: Remove existing lf config
  ansible.builtin.file:
    path: "{{ user_home }}/.config/lf"
    state: absent

- name: Create lf symlink
  ansible.builtin.file:
    src: "{{ dotfiles_dir }}/roles/dotfiles/files/lf"
    dest: "{{ user_home }}/.config/lf"
    state: link
    owner: "{{ username }}"
    group: "{{ username }}"
    force: true

- name: Make lf scripts executable
  ansible.builtin.file:
    path: "{{ item }}"
    mode: '0755'
  loop:
    - "{{ dotfiles_dir }}/roles/dotfiles/files/lf/preview"
    - "{{ dotfiles_dir }}/roles/dotfiles/files/lf/cleaner"
  failed_when: false
